import{r as h}from"./react-vendor-b69f2a9f.js";let s=[],a=0;const d=4;let g=0,x=e=>{let u=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(l){return t.lc=u.push(l),()=>{for(let i=a+d;i<s.length;)s[i]===l?s.splice(i,d):i+=d;let n=u.indexOf(l);~n&&(u.splice(n,1),--t.lc||t.off())}},notify(l,n){g++;let i=!s.length;for(let r of u)s.push(r,t.value,l,n);if(i){for(a=0;a<s.length;a+=d)s[a](s[a+1],s[a+2],s[a+3]);s.length=0}},off(){},set(l){let n=t.value;n!==l&&(t.value=l,t.notify(n))},subscribe(l){let n=t.listen(l);return l(t.value),n},value:e};return t};const O=5,p=6,v=10;let U=(e,u,t,l)=>(e.events=e.events||{},e.events[t+v]||(e.events[t+v]=l(n=>{e.events[t].reduceRight((i,r)=>(r(i),i),{shared:{},...n})})),e.events[t]=e.events[t]||[],e.events[t].push(u),()=>{let n=e.events[t],i=n.indexOf(u);n.splice(i,1),n.length||(delete e.events[t],e.events[t+v](),delete e.events[t+v])}),N=1e3,R=(e,u)=>U(e,l=>{let n=u(l);n&&e.events[p].push(n)},O,l=>{let n=e.listen;e.listen=(...r)=>(!e.lc&&!e.active&&(e.active=!0,l()),n(...r));let i=e.off;return e.events[p]=[],e.off=()=>{i(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let r of e.events[p])r();e.events[p]=[]}},N)},()=>{e.listen=n,e.off=i}}),M=(e,u,t)=>{Array.isArray(e)||(e=[e]);let l,n,i=()=>{if(n===g)return;n=g;let c=e.map(f=>f.get());if(!l||c.some((f,m)=>f!==l[m])){l=c;let f=u(...c);f&&f.then&&f.t?f.then(m=>{l===c&&r.set(m)}):(r.set(f),n=g)}},r=x(void 0),o=r.get;r.get=()=>(i(),o());let T,S=t?()=>{clearTimeout(T),T=setTimeout(i)}:i;return R(r,()=>{let c=e.map(f=>f.listen(S));return i(),()=>{for(let f of c)f()}}),r},L=(e,u)=>M(e,u);function _(e,u,t){let l=new Set(u).add(void 0);return e.listen((n,i,r)=>{l.has(r)&&t(n,i,r)})}let E=(e,u)=>t=>{e.current!==t&&(e.current=t,u())};function I(e,{keys:u,deps:t=[e,u]}={}){let l=h.useRef();l.current=e.get();let n=h.useCallback(r=>(E(l,r)(e.value),(u==null?void 0:u.length)>0?_(e,u,E(l,r)):e.listen(E(l,r))),t),i=()=>l.current;return h.useSyncExternalStore(n,i,i)}export{x as a,L as c,I as u};
